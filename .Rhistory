install.packages("ggplot2")
install.packages("ggplot2")
install.packages("ggplot2")
install.packages("ggplot2", dependencies = TRUE, type = "win.binary")
install.packages("rlang")
install.packages("rlang", type = "win.binary", dependencies = "TRUE")
install.packages("rlang"
install.packages("rlang");
install.packages("rlang");
source("D:\\Rcode\\create_dat.R")
#
create.dat(directory="D:\\CORD\\PSE",csv_file_name="PSE_NSA_2020",out_extension="dat",first_col_data=2,col_headers=TRUE)
source("Z:\\People\\Atanaska\\Useful Rcode\\change_mode_ANedit.R")
change.mode(directory="D:\\CORD\\mgdp\\modes",out.mode="BlueBook",in.mode="Live",meta.ext="xml")
source("D:\\Rcode\\change.xml.activity.R")
change.xml.activity(directory="D:\\CORD\\mgdp\\modes", new.code="GDP(O)")
NCMP_data<-read.csv("D:\\SDG general\\DAO stuff\\
National Child Measurement Programme - England 2018-19 CSV File and Guidance\\
ncmp_1819_final_non_disclosive_published.csv")
NCMP_data<-read.csv("D:\\SDG general\\DAO stuff\\National Child Measurement Programme - England 2018-19 CSV File and Guidance\\ncmp_1819_final_non_disclosive_published.csv")
head(NCMP_data)
min(NCMP_data$AgeInMonths)
min(NCMP_data$AgeInMonths)/12
max(NCMP_data$AgeInMonths)/12
nrow(NCMP_data[(NCMP_data$AgeInMonths)/12)==60, ])
nrow(NCMP_data[(NCMP_data$AgeInMonths/12)==60, ])
head(NCMP_data[(NCMP_data$AgeInMonths/12),])
nrow(NCMP_data[NCMP_data$AgeInMonths==60, ])
head(NCMP_data[NCMP_data$AgeInMonths==60, ])
head(NCMP_data[NCMP_data$AgeInMonths==60, NCMP_data$Height])
head(NCMP_data[NCMP_data$AgeInMonths==60, ])
head(NCMP_data[NCMP_data$AgeInMonths==60, 4])
mean(NCMP_data[NCMP_data$AgeInMonths==60, 4])
median(NCMP_data[NCMP_data$AgeInMonths==60, 4])
?mad
median(NCMP_data[NCMP_data$AgeInMonths==60, 4])
mad(NCMP_data[NCMP_data$AgeInMonths==60, 4])
mad(NCMP_data[NCMP_data$AgeInMonths==60, 4],na.rm=T)
sd(NCMP_data[NCMP_data$AgeInMonths==60, 4])
mad_score<-mad(NCMP_data[NCMP_data$AgeInMonths==60, 4],na.rm=T)
med_score<-median(NCMP_data[NCMP_data$AgeInMonths==60, 4])
head(NCMP_data[NCMP_data$AgeInMonths==60, 4])
med_score<-median(NCMP_data[NCMP_data$AgeInMonths==60, 4])[1]
med_score<-median(NCMP_data[NCMP_data$AgeInMonths==60, 4])
head(NCMP_data[NCMP_data$AgeInMonths==60, 4])[1]
(NCMP_data[NCMP_data$AgeInMonths==60, 4])[1]
((NCMP_data[NCMP_data$AgeInMonths==60, 4])[1]-med_score)/mad_score
med_score
head(NCMP_data[NCMP_data$AgeInMonths==60, 4])
head(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$Height<99.9, 4])
head(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$Height<99.9, ])
head(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$HeightZScore<-2, ])
head(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$Height<99.9, ])
head(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$HeightZScore<-2, ])
head(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$HeightZScore< -2, ])
head(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$Height<99.9, ])
nrow(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$Height<99.9, ])
nrow(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$HeightZScore< -2, ])
age_60<-nrow(NCMP_data[NCMP_data$AgeInMonths==60, ])
age_60
deviations_60<-nrow(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$Height<99.9, ])
deviations_60
prevalence_60<-(deviations_60/age_60)*100
prevalence_60
(deviations_60/age_60)
# WHO standards:
head(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$Height<99.9, ])
nrow(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$HeightZScore< -2, ])
100/50
50/100
0.5*100
((nrow(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$HeightZScore< -2, ]))/age_60)*100
prevalence_60<-(deviations_60/age_60)*100
prevalence_60
deviations_60
nrow(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$HeightZScore< -2, ])
age_60
118/5612
97/5612
-999 < -986
-999 > -986
# clean up suppressions from dataset
nrow(NCMP_data)
clean_NCMP <- NCMP_data[NCMP_data$Height > 0, ]
nrow(clean_NCMP)
nrow(clean_NCMP)-nrow(NCMP_data)
head(NCMP_data)
nrow(clean_NCMP)-nrow(NCMP_data)
age_60
nrow(clean_NCMP[clean_NCMP$AgeInMonths==60, ])
nrow(clean_NCMP[clean_NCMP$AgeInMonths==60, ])-5612
age_60<-nrow(clean_NCMP[clean_NCMP$AgeInMonths==60, ])
prevalence_60
age_60<-nrow(clean_NCMP[clean_NCMP$AgeInMonths==60, ]) #27 suppressed instances
# WHO standards:
head(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$Height<99.9, ])
deviations_60<-nrow(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$Height<99.9, ])
prevalence_60<-(deviations_60/age_60)*100 #1.73% before cleaning
prevalence_60
prevalence_60-1.73
# for comparison with pre-calculated SD from NCMP:
head(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$HeightZScore< -2, ])
nrow(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$HeightZScore< -2, ])
deviations_60
deviations_60
nrow(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$HeightZScore< -2, ])
# prevalence based on pre-calculated SD (a bit larger)
((nrow(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$HeightZScore< -2, ]))/age_60)*100
# WHO standards:
head(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$GenderCode==2 & clean_NCMP$Height<99.9, ])
deviations_60_f
deviations_60
age_60_f <-nrow(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$GenderCode==2, ])
age_60_f
age_60
(deviations_60/age_60)*100
prevalence_60_f<-(deviations_60_f/age_60_f)*100 #1.73% before cleaning vs 1.25% after cleaning (~0.48% difference)
deviations_60_f<-nrow(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$GenderCode==2 & clean_NCMP$Height<99.9, ])
prevalence_60_f<-(deviations_60_f/age_60_f)*100 #1.73% before cleaning vs 1.25% after cleaning (~0.48% difference)
prevalence_60_f
# for comparison with pre-calculated SD from NCMP:
head(clean_NCMP[clean_NCMP$AgeInMonths==60 clean_NCMP$GenderCode==2 & clean_NCMP$HeightZScore< -2, ])
# for comparison with pre-calculated SD from NCMP:
head(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$GenderCode==2 & clean_NCMP$HeightZScore< -2, ])
nrow(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$GenderCode==2 & clean_NCMP$HeightZScore< -2, ])
# prevalence based on pre-calculated SD (a bit larger)
((nrow(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$GenderCode==2 & clean_NCMP$HeightZScore< -2, ]))/age_60_f)*100
prevalence_60_f
deviations_60_f
nrow(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$GenderCode==2 & clean_NCMP$Height<99.9, ])
clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$GenderCode==2 & clean_NCMP$Height<99.9, ]
prevalence_60_f<-(deviations_60_f/age_60_f)*100
prevalence_60_f
nrow(clean_NCMP)-nrow(NCMP_data)
nrow(clean_NCMP)-nrow(NCMP_data) # N supressed height instances
age_60_f
age_60_f
age_60_f_ <-nrow(NCMP_data[NCMP_data$AgeInMonths==60 & NCMP_data$GenderCode==2, ])
age_60_f_
age_60_f_ - age_60_f
prevalence_60_f
deviations_60_f
# WHO standards (?):
head(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$GenderCode==2 & clean_NCMP$Height<99.9, ])
# WHO standards (?):
colnames(clean_NCMP[clean_NCMP$AgeInMonths==60 & clean_NCMP$GenderCode==2 & clean_NCMP$Height<99.9, ])
install.packages("knitr",dependencies=TRUE, type="win.binary")
library(knitr)
# reading the data from 2018-19 download of the zipped file from NHS Digital, after extracting
# assuming the data csv is one level up from the current working directory
NCMP_data<-read.csv("../ncmp_1819_final_non_disclosive_published.csv")
getwd()
setwd("D:\SDG general\DAO stuff\NCMP\NCMP_Rcode")
setwd("D:\\SDG general\\DAO stuff\\NCMP\\NCMP_Rcode")
getwd()
# reading the data from 2018-19 download of the zipped file from NHS Digital, after extracting
# assuming the data csv is one level up from the current working directory
NCMP_data<-read.csv("../ncmp_1819_final_non_disclosive_published.csv")
# some checks
head(NCMP_data)
min(NCMP_data$AgeInMonths)/12
max(NCMP_data$AgeInMonths)/12
# rounding the age in months variable (to match WHO tables better)
NCMP_data$AgeInMonths<-round(NCMP_data$AgeInMonths)
install.packages("swirl",dependencies=TRUE, type="win.binary")
library(swirl)
rm(NCMP_data)
swirl()
5+7
x <- 5+7
swirl()
x
y = x-3
y <- x-3
y
bye()
